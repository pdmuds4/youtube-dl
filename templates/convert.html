<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="icon" href="favicon.ico">
    <link rel="icon" type="image/png" href="img/icon.png">
    <title>YouTubeDL</title>
    {% block style%}
    {% endblock %}
    <!-- <script src="main.js"></script> -->
    <script>
      var scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
      document.cookie = "scrollPosition=" + scrollPosition;
      var scrollPosition = document.cookie.replace(/(?:(?:^|.*;\s*)scrollPosition\s*\=\s*([^;]*).*$)|^.*$/, "$1");
      var scrollToPosition = parseInt(scrollPosition);
      if (!isNaN(scrollToPosition)) {
        window.scrollTo(0, scrollToPosition);
      }
    </script>
  </head>
  <body>
    <header>
      <img class="icon" src="./img/icon.png">
      <h2 class="content-title">YoutubeDL</h2>
      <div class="contents">
        <a class="content btn btn-danger" href="/">Convert</a>
        <!-- <a class="content btn btn-danger" href="/">Thumbnail</a> -->
        <a class="content btn btn-danger" href="/terms">Terms</a>
      </div>
    </header>

    
    <div class="main">
      <h1 class="title">YoutubeDL - Convert</h1>
      <div class="instructions">
        <h3>Youtube video converter & downloader</h3>
        <ul type="square">
          <li class="instlist"><strong>1</strong> - <span>Paste the link</span> of the youtube video</li>
          <li class="instlist"><strong>2</strong> - <span>Select the format</span> you want to convert</li>
          <li class="instlist"><strong>3</strong> - <span>Click on "Search & Add List",</span> it will be saved the list.</li>
          <li class="instlist"><strong>4</strong> - If you can convert many videos, <span>repeat steps 1~3.</span></li>
          <li class="instlist"><strong>5</strong> - <span>Click on "Download ALL",</span> save list will be converted & donwnload.</li>
        </ul>
        
      </div>

      <form class="input" action="/" method="POST">
        <input type="text" name="url" class="form-control" placeholder="Youtube Video URL">

        <select name="format" class="form-select btn-outline-danger rounded" aria-label=".form-select-lg example">
          <option selected>Select Format</option>
          <option disabled>---audio formats---</option>
          <option value="mp3">mp3</option>
          <option value="wav">wav</option>
          <option value="oga">oga</option>
          <option value="m4a">m4a</option>
          <option value="aac">aac</option>
          <option value="aiff">aiff</option>

          <option disabled>---video formats---</option>
          <option value="mp4">mp4</option>
          <option value="avi">avi</option>
          <option value="mov">mov</option>
          <option value="m4v">m4v</option>
          <option value="webm">webm</option>
          <option value="flv">flv</option>
        </select>

        <div class="searchbtn">
          <input type="submit" name="searchadd" class="btn btn-danger btn-lg text-center" value="Search & Add List">
        </div>
        
        {% if alert %}
          <div class="alert alert-danger" role="alert">
            [Error] : Incorrect input. Please correct your input.</div>
        {%else%}
          <br>
        {% endif %}
      </form>

      <div class="savelist">
        <h2 class="savelist_title">Save List</h2>
        <form class="downloadbtn" method="POST">
          {% if zip_list[0] |length > 0 %}
            <input type="submit" name="download" class="btn btn-success btn-lg text-center" value="Download ALL">
          {% else %}
            <button type="button" name="download" class="btn btn-success btn-lg text-center" disabled>Download ALL</button>
          {% endif %}
        </form>
        {% if alert2 %}
          <div class="alert alert-danger" role="alert">{{alert2}}</div>
        {% elif alert3 %}
          <div class="alert alert-success" role="alert">{{alert3}}
        {%else%}
          <br>
        {% endif %}

        {% if zip_list[0] |length > 0 %}
        <table class="table table-bordered table-striped">
          <tbody id="resulttable">
          {% block content %}
          {% endblock %}
          </tbody>
        </table>
        {%else%}
          <br>
        {%endif%}
      </div>
      <div class="text-center"><a class="btn btn-outline-danger btn-lg" href="#">Back to Top</a></div> 
    </div>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
  </body>
</html>